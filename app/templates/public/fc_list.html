{% extends 'base.html' %}

{% block title %}Fleet Commanders{% endblock %}

{% block content %}
<section class="section page-section">
    <div class="container">
        <div class="page-header">
            <h1 class="page-title">
                <span class="title-icon">üéñÔ∏è</span>
                Fleet Commanders
            </h1>
            <p class="page-subtitle">All our legendary FCs</p>
        </div>

        {% if pagination.items %}
        <div class="fc-grid">
            {% for fc, vote_count in pagination.items %}
            <article class="fc-card">
                <div class="fc-card-header">
                    <div class="fc-avatar">
                        {% if fc.avatar_url %}
                        <img src="{{ fc.avatar_url }}" alt="{{ fc.name }}">
                        {% else %}
                        <span class="fc-avatar-placeholder">{{ fc.name[0].upper() }}</span>
                        {% endif %}
                    </div>
                    <div class="fc-info">
                        <h3 class="fc-name">{{ fc.name }}</h3>
                        {% if fc.corporation %}
                        <p class="fc-corp">{{ fc.corporation }}</p>
                        {% endif %}
                        {% if fc.alliance %}
                        <p class="fc-alliance">{{ fc.alliance }}</p>
                        {% endif %}
                    </div>
                </div>

                <div class="fc-card-body">
                    {% set tag_counts = fc.get_tag_counts() %}
                    {% if tag_counts %}
                    <div class="fc-tags">
                        {% for tag_id, count in tag_counts.items()|sort(attribute='1', reverse=true) %}
                        {% if loop.index <= 3 %} {% set tag=all_tags.get(tag_id) %} {% if tag %} <span
                            class="tag-badge">
                            <span class="tag-emoji">{{ tag.emoji }}</span>
                            <span class="tag-name">{{ tag.name }}</span>
                            <span class="tag-count">{{ count }}</span>
                            </span>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                    </div>
                    {% else %}
                    <p class="fc-no-tags">No badges yet</p>
                    {% endif %}
                </div>

                <div class="fc-card-footer">
                    <span class="fc-vote-count">
                        üó≥Ô∏è {{ vote_count }} vote{{ 's' if vote_count != 1 else '' }}
                    </span>
                    <a href="{{ url_for('public.fc_detail', fc_id=fc.id) }}" class="btn btn-sm btn-primary">
                        Vote
                    </a>
                </div>
            </article>
            {% endfor %}
        </div>

        <!-- Pagination -->
        {% if pagination.pages > 1 %}
        <nav class="pagination">
            {% if pagination.has_prev %}
            <a href="{{ url_for('public.fc_list', page=pagination.prev_num) }}" class="page-link">‚Üê Previous</a>
            {% endif %}

            <span class="page-info">
                Page {{ pagination.page }} / {{ pagination.pages }}
            </span>

            {% if pagination.has_next %}
            <a href="{{ url_for('public.fc_list', page=pagination.next_num) }}" class="page-link">Next ‚Üí</a>
            {% endif %}
        </nav>
        {% endif %}

        {% else %}
        <div class="empty-state">
            <span class="empty-icon">üöÄ</span>
            <h2>No FCs yet</h2>
            <p>Fleet Commanders coming soon!</p>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}